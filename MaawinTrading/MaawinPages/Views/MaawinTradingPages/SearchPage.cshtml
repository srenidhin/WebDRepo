@model List<MaawinPages.Models.ProductModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "SearchPage";
}

<style>
    .container1 {
        margin-bottom: 10px;
        display: flex;
    }

        .container1 .post {
            width: 350px;
            height: 500px;
            display: flex;
            overflow: hidden;
            flex-direction: column;
            position: relative;
        }

            .container1 .post:hover .header_post {
                margin-top: -20px;
                cursor: pointer;
            }

            .container1 .post:hover .body_post {
                height: 50%;
            }

            .container1 .post:hover img {
                transform: translateY(-10px) translateX(-5px) scale(1.05);
            }

            .container1 .post .header_post {
                object-fit: none;
                height: 60%;
                background: #ddd;
                position: absolute;
                top: 0;
                -webkit-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                -moz-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                -ms-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                -o-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
            }

                .container1 .post .header_post img {
                    max-width: 100%;
                    height: 100%;
                    transition: ease-in-out 600ms;
                    image-rendering: -webkit-optimize-contrast;
                }

            .container1 .post .body_post {
                width: 100%;
                height: 60%;
                background: #fff;
                position: absolute;
                bottom: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                -webkit-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                -moz-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                -ms-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                -o-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                cursor: pointer;
            }

                .container1 .post .body_post .post_content {
                    width: 80%;
                    height: 80%;
                    background: #fff;
                    position: relative;
                }

                    .container1 .post .body_post .post_content h1 {
                        font-size: 20px;
                        font-weight: bold;
                    }

                    .container1 .post .body_post .post_content p {
                        font-size: 14px;
                        font-weight: normal;
                    }

                    .container1 .post .body_post .post_content .container_infos {
                        width: 100%;
                        display: flex;
                        justify-content: space-between;
                        position: absolute;
                        bottom: 0;
                        border-top: 1px solid rgba(0, 0, 0, 0.2);
                        padding-top: 25px;
                    }

                        .container1 .post .body_post .post_content .container_infos .postedBy {
                            display: flex;
                            flex-direction: column;
                            text-transform: uppercase;
                            letter-spacing: 1px;
                            font-size: 12px;
                        }

                            .container1 .post .body_post .post_content .container_infos .postedBy span {
                                font-size: 12px;
                                text-transform: uppercase;
                                opacity: 0.5;
                                letter-spacing: 1px;
                                font-weight: bold;
                            }

                        .container1 .post .body_post .post_content .container_infos .container_tags {
                            display: flex;
                            flex-direction: column;
                        }

                            .container1 .post .body_post .post_content .container_infos .container_tags span {
                                font-size: 12px;
                                text-transform: uppercase;
                                opacity: 0.8;
                                letter-spacing: 1px;
                                font-weight: bold;
                                margin-left: 40px;
                            }

                            .container1 .post .body_post .post_content .container_infos .container_tags .tags ul {
                                display: flex;
                            }

                                .container1 .post .body_post .post_content .container_infos .container_tags .tags ul li {
                                    font-size: 18px;
                                    letter-spacing: 2px;
                                    list-style: none;
                                    margin-left: 8px;
                                    text-transform: uppercase;
                                    position: relative;
                                    z-index: 1;
                                    display: flex;
                                    justify-content: center;
                                    cursor: pointer;
                                }

                                    .container1 .post .body_post .post_content .container_infos .container_tags .tags ul li:first-child {
                                        margin-left: 0px;
                                    }

                                    .container1 .post .body_post .post_content .container_infos .container_tags .tags ul li:before {
                                        content: "";
                                        text-align: center;
                                        width: 100%;
                                        height: 5px;
                                        background: #FC6042;
                                        opacity: 0.5;
                                        position: absolute;
                                        bottom: 0;
                                        z-index: -1;
                                        padding: 0px 1px;
                                        -webkit-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                                        -moz-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                                        -ms-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                                        -o-transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                                        transition: cubic-bezier(0.68, -0.55, 0.27, 1.55) 320ms;
                                    }

                                    .container1 .post .body_post .post_content .container_infos .container_tags .tags ul li:hover:before {
                                        height: 18px;
                                    }

    @@keyframes top {
        0% {
            opacity: 0;
            bottom: -80px;
        }

        100% {
            opacity: 1;
            bottom: 0px;
        }
    }

    @@keyframes icon {
        0% {
            opacity: 0;
            transform: scale(0);
        }

        50% {
            opacity: 1;
            transform: scale(1.3) rotate(-2deg);
        }

        100% {
            opacity: 1;
            bottom: 0px;
        }
    }

    #pageView {
        align-items: center;
        justify-content: center;
        margin-top: 90px;
        margin-left: 40%;
    }

    .pagination a {
        font-size: 20px;
        padding: 15px;
        border: solid;
        color: white;
        margin: 5px;
    }

        .pagination a:hover {
            color: #1b1717;
            background-color: darkorange;
            text-decoration: none;
        }

    @@media screen and (min-width: 992px) {
        #content {
            height: 1500px;
        }
    }

    @@media screen and (max-width: 991px) {
        #content {
            height: 4500px;
        }
    }
</style>
<div style="margin-left:15%;width:69%;margin-bottom:40px;border-radius:5px;">
    <nav class="navbar navbar-expand-md navbar-light" style="background-color:lightgreen">
        <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
            <ul class="navbar-nav mr-auto"></ul>
        </div>
        <div class="mx-auto order-0">
            <a class="navbar-brand mx-auto" style="font-size:40px;" href="#">Our Products</a>
        </div>
        <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" id="srctxt" style="font-size:22px">
                </li>
                <li class="nav-item" style="margin-left:4px">
                    <button class="btn btn-outline-success my-2 my-sm-0" id="search" style="font-size:22px;padding-left:20px;padding-right:20px">Search</button>
                </li>
            </ul>
        </div>
    </nav>
</div>

<div style="margin-left:15%;margin-right:15%;" id="content">
    @if (ViewBag.Data != null)
    {
        int i = 1;
        foreach (var row in Model)
        {
            <section>
                <div class="col-md-4">
                    <div class="container1">
                        <div class="post">
                            <div class="header_post">
                                <img src="@row.pImgLocation" alt="">
                            </div>

                            <div class="body_post">
                                <div class="post_content">

                                    <h1>@row.pName</h1>
                                    <p>
                                        @row.pDesc
                                    </p>

                                    <div class="container_infos">
                                        <div class="postedBy">
                                            <span>Code</span>
                                            @row.pCode
                                        </div>

                                        <div class="container_tags">
                                            <span>Quantities</span>
                                            <div class="tags">
                                                <ul>
                                                    <li>@row.pQuantity</li>
                                                </ul>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        }
    }
    else
    {
        <h1>New Products Coming Soon !</h1>
    }
</div>
<div>
    <div style="" id="pageView">
        <div class="pagination">
            <a id="first" href="#">First</a>
            <a id="prev" href="#">Prev</a>
            <span style="border:solid;color:white;padding: 16px 16px;"><input style="width:30px;color:black;font-size:20px" type="text" id="PageNo" value="1" readonly /><label style="margin-left:5px;font-size:20px" id="disp"></label></span>
            <a id="next" href="#">Next</a>
            <a id="last" href="#">Last</a>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        debugger;
        var rowCount = @Html.Raw(ViewBag.Data);
        var cardContent = $("#content").html();
        var view = "";
        var marker = 0;
        var dispCount =  Math.ceil(rowCount/9);
        $("#disp").text(' of ' + dispCount);
        $("#next").on('click',function (){
            debugger;
            var x = $("#PageNo").val();
            x = parseInt(x);
            if(x == dispCount - 1){
                $("#last").click();
                return;
            }
            var j = 0;
            var y = marker;
            for (j = 0 ; j < 9; j++) {
                marker = cardContent.indexOf('</section>', marker);
                marker += 10;
            }
            var dispBody = cardContent.substring(y, marker);
            $('#content').html(dispBody);
            $("#PageNo").val(x + 1);
        });

        $("#prev").on("click",function(){
            var x = $("#PageNo").val();
            if (x == dispCount)
            {
                var k = (rowCount % 9);
                for (i = 0; i < k; i++) {
                    marker -= 10;
                    marker = cardContent.lastIndexOf('</section>', marker);
                }
                var y = marker;
                for (i = 0; i < 9; i++) {
                    y -= 10;
                    y = cardContent.lastIndexOf('</section>', y);
                }
                var dispBody = cardContent.substring(y, marker);
                $('#content').html(dispBody);
                $("#PageNo").val(x - 1);
            }
            else if (x != 1) {
                for(i=0;i<9;i++)
                {
                    marker-=10;
                    marker=cardContent.lastIndexOf('</section>',marker);
                }
                var y=marker;
                for(i=0;i<9;i++)
                {
                    y-=10;
                    y=cardContent.lastIndexOf('</section>',y);
                }
                var dispBody = cardContent.substring(y, marker);
                $('#content').html(dispBody);
                $("#PageNo").val(x - 1);
            }
        });
        $("#first").on('click',function(){
            marker=0;
            $("#PageNo").val('0');
            $("#next").click();
        });

        $("#last").on('click',function(){
            var x = $("#PageNo").val();
            x = parseInt(x);
            var xx = (rowCount % 9);
            xx = (xx == 0) ? 9 : xx;
            marker = cardContent.lastIndexOf('</section>');
            marker += 9;
            var i = 0; var y = marker;
            for (i = 0; i < xx; i++)
            {
                y -= 10;
                y = cardContent.lastIndexOf('</section>', y);
            }
            var dispBody = cardContent.substring(y, marker);
            $('#content').html(dispBody);
            $("#PageNo").val(dispCount);
        });
        $("#first").click();
    });
</script>